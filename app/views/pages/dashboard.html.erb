<div class="my-container">

  <h1>My Properties</h1>

  <% if @villas.any? %>
    <div class="row">
      <% @villas.each do |villa| %>
        <div class="col-md-4">
          <div class="card mb-4">
            <%= image_tag villa.img_url, class: "card-img-top", alt: villa.villa_name %>
            <div class="card-body">
              <h5 class="card-title"><%= villa.villa_name %></h5>
              <p class="card-text"><%= villa.description %></p>
              <p class="card-text"><strong>Price:</strong> $<%= villa.price %> per night</p>
              <div class="d-flex justify-content-between">
                <%= link_to 'View Details', villa_path(villa), class: 'btn btn-primary' %>
                <%= link_to 'Delete', villa_path(villa),
                      method: :delete,
                      data: { confirm: 'Are you sure you want to delete this property?' },
                      class: 'btn btn-danger mt-2' %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p>You have not listed any properties yet.</p>
  <% end %>

  <div class="mt-3">
    <%= link_to 'Add New Property', new_villa_path, class: 'btn btn-success' %>
  </div>
</div>


<div class="my-container">
  <h1>My Booking</h1>
  <div>
    <% @my_bookings.each do |booking| %>
      <div>
        <img src="<%= booking.villa.img_url%>" alt="recipe image" width="600px" height="400px" >
        <p><%= booking.villa.villa_name %></p>
        <p><%= booking.villa.description %></p>
        <p><%= booking.start_date %></p>
        <p><%= booking.end_date %></p>
      </div>
      <div>
        <%= link_to 'Amend Booking', edit_villa_booking_path(booking.villa, booking), class: 'btn btn-primary' %>
      </div>
      <div>
        <%= link_to 'Cancel Booking', villa_booking_path(booking.villa, booking),
              method: :delete,
              data: { confirm: 'Are you sure you want to delete this booking?' },
              class: 'btn btn-danger mt-2' %>
      </div>

    <% end %>
  </div>
</div>

<div class="my-container">
  <h1>Booking Requests to Confirm</h1>
  <div>
    <% @booking_requests.each do |request| %>
      <div>
        <img src="<%= request.villa.img_url%>" alt="recipe image" width="600px" height="400px" >
        <p><%= request.villa.villa_name %></p>
        <p><%= request.villa.description %></p>
        <p><%= request.start_date %></p>
        <p><%= request.end_date %></p>
      </div>
    <% end %>
  </div>
</div>
